# 葫芦娃 作业二 实现思路

## 概述 - 自顶向下

+ 进入主程序入口
+ 新建一个Universe类
  + Universe初始化Ground
    + Ground是一个场地类，维护一个Tile类的二维数组
      + Tile类是一个包含位置属性、包含人物单位Character的地块类
        + Character是一个人物类，包括人物的血量、姓名、视野能力、移动能力等属性
          + 人物类可以访问Ground类获取其位置以及视野范围的地块或人物信息
          + 人物类可以向视野范围内的人物类交互，例如互相判断敌友，交换位置，请求让路，命令移动等
          + 人物类向Ground类请求自己移动能力的范围内的移动，Ground类会进行移动合法性检查
          + 人物类可以向视野内可以看到的位置寻路，如果寻路成功，可以自行向Ground类请求移动并移动到该节点
        + Tile类有向外界提供地块及地块内单位相关信息的接口
      + Ground类维护一个单位到地块的映射表，也即可以在常数时间内返回每个单位的位置——这一点对于一个真实的场地是很容易理解的
      + Ground类提供一个对场地信息全局描述的接口，在此程序中该接口被Universe调用，从而在控制台显示场地信息
      + Ground类接收单位向其发送的移动请求，如果合法，则该单位成功移动，Ground类更新其内容
    + Universe诞生一个老爷爷OldMan类对象
      + 老爷爷类继承自Character类
      + 老爷爷类提供接生葫芦娃HuluBaby的接口
        + HuluBaby继承自Character类
        + 其维护一个向老爷爷的索引
        + 其拥有出生日期属性，可以标志其年龄，从而在排序时可以使用年龄区分
        + 葫芦娃类在构造时使用系统时间初始化出生日期
      + 老爷爷类维护一个葫芦娃的名单列表
      + 通过名单列表老爷爷类可以向葫芦娃类发送移动命令、自行排序命令
    + Universe可以对自身的Ground进行展示，效果详见程序运行时的控制台
  + Universe中的老爷爷使自己走上场地
  + Universe中的老爷爷给7个葫芦娃接生
  + Universe中的老爷爷命令7个葫芦娃尝试走上场地
    + 7个葫芦娃分别尝试从场地边缘走上场地
  + Universe中的老爷爷命令7个葫芦娃走成有序的一排
    + 7个葫芦娃分别向场地请求视野，之后自行寻路，尝试走到目标位置
  + Universe中的老爷爷命令7个葫芦娃相互随机交换以打乱顺序
  + Universe中的老爷爷命令7个葫芦娃自行商量进行排序，均认为自身位置无误时结束
    + 葫芦娃互相询问对方的年龄，如果年龄大的在自己右侧，则交换位置，并返回尚未确定位置标志，直到全部有序
  + Universe向外界展示自身ground的状态

## 程序运行请注意

+ 为了程序运行效果，请将控制台缓冲区大小调到8000000上下，或者导出到文件
+ 将程序中部分显示方法注释，可以直接看到各个结果图
+ 如不注释，则每次移动操作基本都会输出到控制台进行显示
